<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta
          name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />
        <title>ML API  </title>
        <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
        

    </head>
    <body class="bg-sky-900">
        <div class="container mx-auto px-5">
            <div class="drop-shadow-lg bg-gray-200 rounded-xl mt-8 p-8">

            <div class="flex flex-col lg:flex-row gap-4 ">
                <div class="grow">
                <div>
                    <h3 class="font-mono mb-3 text-lg text-sky-900">Image Prediction</h3>
                    {% with messages = get_flashed_messages() %}
                    {% if messages %}
                    <ul>
                    {% for message in messages %}
                        <li>{{ message }}</li>
                    {% endfor %}
                    </ul>
                    {% endif %}
                {% endwith %}
               
        
                </div>
    
                
                <form method="post" action="/" enctype="multipart/form-data">
                    
                    <div>
                        <label
                            class="flex justify-center w-full h-32 px-4 transition bg-white border-2 border-gray-300 border-dashed rounded-md appearance-none cursor-pointer hover:border-gray-400 focus:outline-none">
                            <span class="flex items-center space-x-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-gray-600" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                                </svg>
                                <span class="font-medium text-gray-600">
                                    Drop the image to predict, or
                                    <span class="text-blue-600 underline">browse</span>
                                </span>
                            </span>
                            <input type="file" name="file" class="hidden">
                        </label>
                        <div class="text-right">
                            <input class="mt-4 cursor-pointer px-6 py-2 mx-auto rounded-md text-lg font-semibold text-indigo-100 bg-green-400" type="submit" value="Submit">
                
                        </div>
                    </div>
            
                </form>
                {% if context and context['prediction'] %}
                <div class="row">
                    <div class="col-25">
                    <label for="subject">Predicted class: {{ context['prediction'] }} </label><br>
                    <label for="subject">Score: {{ context['score'] }} </label>
                    </div>
                </div>
                <form id="form" method="POST" action="/feedback">
                    <button type="submit">Report incorrect answer</button>
                    <input name="report" style="visibility: hidden;" value="{'filename': '{{ filename }}', 'prediction': '{{ context['prediction'] }}', 'score': {{ context['score'] }} }"/>
                </form>
            {% endif %}
                </div>
                <div class="h-full flex-auto w-full h-64 lg:h-none lg:w-64 lg:border-l-2 lg:border-indigo-500 bg-contain bg-no-repeat bg-center">
                    
                    {% if filename %}
                            <div class="text-center pt-8">
                                    <img class="mx-auto w-64" src="{{ url_for('app_router.display_image', filename=filename) }}">
                                                              
                            </div>

                    {% else %}
                            <div class="text-center pt-8">
                                <img class="mx-auto w-64" src="{{ url_for('static', filename='background.webp') }}">
                                                        
                        </div>    
                    {% endif %}
                </div>
                
            </div>

            </div>
        </div>
    </body>
    
</html>

